<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{.StoreName}} - Yazar Kasa</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/qr-scanner@1.4.2/qr-scanner.umd.min.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'cash-green': '#22c55e',
                        'cash-blue': '#3b82f6',
                        'cash-red': '#ef4444',
                        'cash-gray': '#374151',
                        'register-dark': '#1f2937',
                        'register-light': '#f3f4f6',
                        'screen-bg': '#e6f0ff',
                        'screen-text': '#000080',
                        'device-black': '#1a1a1a',
                        'device-frame': '#2d2d2d',
                        'key-gray': '#6b7280',
                        'key-dark': '#374151',
                        'lcd-bg': '#c7d8f0',
                        'lcd-text': '#000066'
                    },
                    fontFamily: {
                        'mono': ['Monaco', 'Menlo', 'Consolas', 'monospace'],
                        'digital': ['Orbitron', 'monospace'],
                        'cash-register': ['Courier New', 'monospace']
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap');
        
        .cash-register-body {
            background: linear-gradient(145deg, #2d2d2d, #1a1a1a);
            box-shadow: 
                0 0 0 3px #333,
                0 15px 35px rgba(0, 0, 0, 0.4),
                inset 0 1px 3px rgba(255, 255, 255, 0.1);
            border-radius: 12px;
        }
        
        .lcd-screen {
            background: linear-gradient(145deg, #c7d8f0, #b8cde8);
            box-shadow: 
                inset 0 2px 8px rgba(0, 0, 0, 0.2),
                inset 0 -1px 2px rgba(255, 255, 255, 0.3);
            border: 2px solid #9bb3d4;
        }
        
        .cash-key {
            background: linear-gradient(145deg, #7c8590, #6b7280);
            box-shadow: 
                0 3px 6px rgba(0, 0, 0, 0.3),
                inset 0 1px 2px rgba(255, 255, 255, 0.2);
            border: 1px solid #5a6169;
            transition: all 0.1s ease;
            aspect-ratio: 1;
            border-radius: 6px;
        }
        
        .cash-key:hover {
            background: linear-gradient(145deg, #8a95a2, #7c8590);
        }
        
        .cash-key:active, .button-press {
            transform: translateY(2px);
            box-shadow: 
                0 1px 3px rgba(0, 0, 0, 0.4),
                inset 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .key-red {
            background: linear-gradient(145deg, #f87171, #ef4444) !important;
            color: white !important;
        }
        
        .key-yellow {
            background: linear-gradient(145deg, #fbbf24, #f59e0b) !important;
            color: white !important;
        }
        
        .key-green {
            background: linear-gradient(145deg, #34d399, #10b981) !important;
            color: white !important;
        }
        
        .key-orange {
            background: linear-gradient(145deg, #fb923c, #f97316) !important;
            color: white !important;
        }
        
        .key-blue {
            background: linear-gradient(145deg, #3b82f6, #2563eb) !important;
            color: white !important;
        }
        
    </style>
</head>
<body class="bg-gradient-to-br from-gray-800 to-gray-900 min-h-screen font-sans flex items-start justify-center p-4 py-8" {{if .Standalone}}data-standalone="true"{{end}}>
    <!-- BEKO 220TR Cash Register -->
    <div class="cash-register-body p-6 max-w-xs w-full relative mx-auto">
        <!-- Model Label in Bezel -->
        <div class="text-center text-gray-300 text-sm font-bold mb-2">220TR</div>
        
        <!-- LCD Display Screen -->
        <div class="lcd-screen p-4 rounded-lg mb-6 font-cash-register">
            <!-- Status Bar -->
            <div class="flex justify-between items-center mb-3 text-lcd-text text-xs">
                <div class="flex items-center">
                    <span class="font-bold">SATIŞ</span>
                    <div class="ml-2 flex space-x-1">
                        <div class="w-1 h-3 bg-lcd-text"></div>
                        <div class="w-1 h-3 bg-lcd-text"></div>
                        <div class="w-1 h-2 bg-lcd-text opacity-60"></div>
                        <div class="w-1 h-1 bg-lcd-text opacity-40"></div>
                    </div>
                </div>
                <div class="text-right">
                    <div id="current-time" class="font-mono text-xs w-12 text-right">13:21:45</div>
                    <div id="current-date" class="text-xs">29-03-2025</div>
                </div>
            </div>
            
            <!-- Input Line -->
            <div id="input-display" class="text-right text-lcd-text font-mono text-lg font-bold mb-2 h-[24px]">
                <span id="current-input"></span>
            </div>
            
            <!-- Transaction Display -->
            <div id="transaction-display" class="text-lcd-text font-mono text-sm h-[80px] overflow-y-auto border-t border-lcd-text border-opacity-30 pt-2">
                <div class="text-center text-opacity-60 py-4 text-xs">
                    0,00
                </div>
            </div>
            
            <!-- Total Display -->
            <div class="border-t border-lcd-text border-opacity-30 pt-2 mt-2 h-[30px]">
                <div class="text-right text-lcd-text font-mono text-lg font-bold">
                    <span id="total-display">0,00</span>
                </div>
                <div id="payment-display" class="text-center text-xs opacity-75 mt-1"></div>
            </div>
        </div>

        <!-- Keypad Layout -->
        <div class="space-y-2">
            <!-- Row 1: 1, 2, 3, YEMEK -->
            <div class="grid grid-cols-4 gap-2">
                <button class="num-btn cash-key px-2 py-3 text-sm font-bold text-white" data-num="1">1</button>
                <button class="num-btn cash-key px-2 py-3 text-sm font-bold text-white" data-num="2">2</button>
                <button class="num-btn cash-key px-2 py-3 text-sm font-bold text-white" data-num="3">3</button>
                {{if gt (len .Kisim) 1}}
                <button class="kisim-btn cash-key key-orange px-2 py-3 text-xs font-semibold" 
                        data-kisim-id="2" 
                        data-kisim-name="{{(index .Kisim 1).Name}}" 
                        data-tax-rate="{{(index .Kisim 1).TaxRate}}"
                        data-preset-price="{{(index .Kisim 1).PresetPrice}}">
                    YEMEK
                </button>
                {{else}}
                <button class="cash-key px-2 py-3 text-xs font-semibold text-white" disabled>YEMEK</button>
                {{end}}
            </div>
            
            <!-- Row 2: 4, 5, 6, GIDA -->
            <div class="grid grid-cols-4 gap-2">
                <button class="num-btn cash-key px-2 py-3 text-sm font-bold text-white" data-num="4">4</button>
                <button class="num-btn cash-key px-2 py-3 text-sm font-bold text-white" data-num="5">5</button>
                <button class="num-btn cash-key px-2 py-3 text-sm font-bold text-white" data-num="6">6</button>
                <button class="kisim-btn cash-key key-orange px-2 py-3 text-xs font-semibold" 
                        data-kisim-id="1" 
                        data-kisim-name="{{(index .Kisim 0).Name}}" 
                        data-tax-rate="{{(index .Kisim 0).TaxRate}}"
                        data-preset-price="{{(index .Kisim 0).PresetPrice}}">
                    GIDA
                </button>
            </div>
            
            <!-- Row 3: 7, 8, 9, KREDI -->
            <div class="grid grid-cols-4 gap-2">
                <button class="num-btn cash-key px-2 py-3 text-sm font-bold text-white" data-num="7">7</button>
                <button class="num-btn cash-key px-2 py-3 text-sm font-bold text-white" data-num="8">8</button>
                <button class="num-btn cash-key px-2 py-3 text-sm font-bold text-white" data-num="9">9</button>
                <button id="payment-card" class="payment-btn cash-key px-1 py-3 text-xs font-semibold text-white" data-method="Kart">
                    KREDI
                </button>
            </div>
            
            <!-- Row 4: M, 0, ,, NAKIT -->
            <div class="grid grid-cols-4 gap-2">
                <button id="miktar-btn" class="cash-key key-blue px-2 py-3 text-xs font-semibold text-white">M</button>
                <button class="num-btn cash-key px-2 py-3 text-sm font-bold text-white" data-num="0">0</button>
                <button class="num-btn cash-key px-2 py-3 text-sm font-bold text-white" data-num=",">,</button>
                <button id="payment-cash" class="payment-btn cash-key key-green px-1 py-3 text-xs font-semibold" data-method="Nakit">
                    NAKİT
                </button>
            </div>
            
            <!-- Row 5: Empty, Empty, C, IPTAL -->
            <div class="grid grid-cols-4 gap-2">
                <div></div>
                <div></div>
                <button id="clear-btn" class="cash-key key-yellow px-2 py-3 text-sm font-bold">C</button>
                <button id="cancel-btn" class="cash-key key-red px-2 py-3 text-xs font-semibold">İPTAL</button>
            </div>
        </div>
    </div>

    <!-- QR Scanner Modal -->
    <div id="qr-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-lg max-w-md w-full p-6">
                <h3 class="text-lg font-semibold mb-4">Cüzdan QR Kodu Tarat</h3>
                <div id="qr-reader" class="mb-4"></div>
                <div class="flex justify-end space-x-3">
                    <button id="qr-cancel" class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50">İptal</button>
                </div>
            </div>
        </div>
    </div>


    <!-- Status Messages -->
    <div id="status-message" class="hidden fixed top-4 right-4 z-50 max-w-sm"></div>

    <!-- Log Panel (only in verbose mode) -->
    {{if .Verbose}}
    <div class="fixed bottom-4 left-4 bg-black bg-opacity-90 text-green-400 text-xs font-mono p-4 rounded-lg max-w-md max-h-32 overflow-y-auto border border-green-600">
        <div class="text-green-300 mb-2 font-bold">SYSTEM LOG</div>
        <div id="log-content" class="leading-tight"></div>
    </div>
    {{end}}

    <script src="/static/js/app.js"></script>
</body>
</html>